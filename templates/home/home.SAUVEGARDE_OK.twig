{% extends 'base.html.twig' %}

{% block title %}Formez-vous facilement √† votre futur m√©tier
{% endblock %}

{% block stylesheets %}
	<link href="../css/fichier.css?=v16" rel="stylesheet"/>
	<link rel="stylesheet" href="{{ asset('css/footer.css') }}">
	<link rel="preconnect" href="https://assets.calendly.com">
	<link rel="stylesheet" href="https://assets.calendly.com/assets/external/widget.css">
	<!-- AOS Animation Library -->
	<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
	<style>
		/* ===== VARIABLES MODERNES ===== */
		:root {
			--primary-gradient: linear-gradient(135deg, #0b3f89, #1e5cb8);
			--secondary-gradient: linear-gradient(135deg, #00b4d8, #0077b6);
			--accent-color: #d71a22;
			--glass-bg: rgba(255, 255, 255, 0.1);
			--glass-border: rgba(255, 255, 255, 0.2);
			--shadow-light: 0 8px 32px rgba(0, 0, 0, 0.1);
			--shadow-heavy: 0 16px 64px rgba(0, 0, 0, 0.15);
			--border-radius: 20px;
			--transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
			--animation-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
		}

		/* ===== GENERAL MODERNIZATION ===== */
		body {
			overflow-x: hidden;
		}

		/* ===== HERO SECTION FIXE ===== */
		.hero-section {
			position: relative;
			background: linear-gradient(135deg, #0b3f89 0%, #1e5cb8 50%, #00b4d8 100%);
			padding: 80px 0 60px;
			overflow: hidden;
			/* Suppression de l'effet parallax - section reste fixe */
		}

		.hero-section::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse"><path d="M 50 0 L 0 0 0 50" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
			animation: float 20s ease-in-out infinite;
		}

		@keyframes float {
			0%, 100% { transform: translateY(0px) rotate(0deg); }
			50% { transform: translateY(-20px) rotate(1deg); }
		}

		.titlePage {
			position: relative;
			z-index: 2;
			font-size: clamp(2.5rem, 5vw, 4rem);
			text-align: center;
			color: white;
			font-weight: 700;
			margin: 0 0 40px 0;
			text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
			background: linear-gradient(45deg, #ffffff, #e3f2fd);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		/* ===== CTA MODERNE ===== */
		.cta-popup {
			position: relative;
			z-index: 2;
		display: block;
			margin: 0 auto 50px auto;
			padding: 18px 40px;
		font-size: 18px;
		font-weight: 600;
			background: rgba(255, 255, 255, 0.2);
			color: white;
			border: 2px solid rgba(255, 255, 255, 0.3);
			border-radius: 50px;
		cursor: pointer;
			transition: var(--transition);
			backdrop-filter: blur(20px);
			box-shadow: var(--shadow-light);
			overflow: hidden;
		}

		/* ===== CTA BLEU POUR LE 2√àME BOUTON ===== */
		.cta-popup-blue {
			position: relative;
			z-index: 2;
			display: block;
			margin: 0 auto 50px auto;
			padding: 18px 40px;
			font-size: 18px;
			font-weight: 600;
			background: rgba(11, 63, 137, 0.2);
			color: #0b3f89;
			border: 2px solid rgba(11, 63, 137, 0.3);
			border-radius: 50px;
			cursor: pointer;
			transition: var(--transition);
			backdrop-filter: blur(20px);
			box-shadow: var(--shadow-light);
			overflow: hidden;
		}

		.cta-popup::before,
		.cta-popup-blue::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
			transition: left 0.5s;
		}

		.cta-popup:hover,
		.cta-popup-blue:hover {
			transform: translateY(-2px);
			box-shadow: var(--shadow-heavy);
		}

		.cta-popup:hover {
			border-color: rgba(255, 255, 255, 0.5);
		}

		.cta-popup-blue:hover {
			border-color: rgba(11, 63, 137, 0.5);
			background: rgba(11, 63, 137, 0.3);
		}

		.cta-popup:hover::before,
		.cta-popup-blue:hover::before {
			left: 100%;
		}

		/* ===== CATEGORIES SECTION MODERNE ===== */
		.categories-section {
			background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
			padding: 80px 20px;
			position: relative;
		}

		/* ===== TITRES DE SECTION √âL√âGANTS ===== */
		.section-title {
			text-align: center;
			font-size: clamp(2.2rem, 4vw, 3.5rem);
			font-weight: 600;
			color: #0b3f89;
			margin-bottom: 20px;
			line-height: 1.3;
			position: relative;
			padding-bottom: 20px;
		}

		.section-title::after {
			content: '';
			position: absolute;
			bottom: 0;
			left: 50%;
			transform: translateX(-50%);
			width: 80px;
			height: 4px;
			background: linear-gradient(90deg, #0b3f89, #1e5cb8);
			border-radius: 2px;
		}

		.section-subtitle {
			text-align: center;
			font-size: 1.2rem;
			color: #64748b;
			margin-bottom: 60px;
			max-width: 700px;
			margin-left: auto;
			margin-right: auto;
			font-weight: 400;
			line-height: 1.6;
		}

.categories {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
			gap: 30px;
			max-width: 1400px;
			margin: 0 auto;
		}

.category {
			position: relative;
			transition: var(--transition);
		}

		/* ===== CARTES GLASSMORPHISM ===== */
.category-card {
			position: relative;
			border-radius: var(--border-radius);
  overflow: hidden;
			background: rgba(255, 255, 255, 0.25);
			backdrop-filter: blur(20px);
			border: 1px solid rgba(255, 255, 255, 0.3);
  cursor: pointer;
			transition: var(--transition);
			box-shadow: var(--shadow-light);
}

		.category:not(.expanded) .category-card:hover {
			transform: translateY(-10px) scale(1.02);
			box-shadow: var(--shadow-heavy);
			background: rgba(255, 255, 255, 0.35);
		}

.category-image {
  width: 100%;
			height: 220px;
  object-fit: cover;
			transition: var(--transition);
		}

		.category:not(.expanded) .category-card:hover .category-image {
			transform: scale(1.1);
			filter: brightness(1.1);
		}

.category-title {
			background: var(--primary-gradient);
  color: white;
			padding: 20px;
  font-size: 18px;
  font-weight: bold;
  text-align: center;
			position: relative;
			overflow: hidden;
		}

		.category-title::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: rgba(255, 255, 255, 0.1);
			transition: left 0.3s;
		}

		.category:not(.expanded) .category-card:hover .category-title::before {
			left: 100%;
		}

				/* ===== SYST√àME MODAL EN PREMIER PLAN ===== */
		.category.expanded {
			position: fixed !important;
			top: 50% !important;
			left: 50% !important;
			transform: translate(-50%, -50%) !important;
			z-index: 1000;
			width: 90vw;
			max-width: 1000px;
			max-height: 90vh;
			margin: 0 !important;
			padding: 0 !important;
			grid-column: auto !important;
			animation: modalAppear 0.3s ease-out;
		}

		.category.expanded .category-card {
			height: auto;
			min-height: 500px;
			display: grid;
			grid-template-columns: 400px 1fr;
			gap: 0;
			margin: 0 !important;
			overflow: hidden;
			box-shadow: 0 25px 80px rgba(11, 63, 137, 0.3);
			border: 2px solid rgba(11, 63, 137, 0.1);
			border-radius: 20px;
			background: rgba(255, 255, 255, 0.98);
			backdrop-filter: blur(20px);
			position: relative;
		}

		.category.expanded .category-image {
			height: 100%;
			min-height: 500px;
			border-radius: 18px 0 0 18px;
		}

		.category.expanded .category-title {
			grid-column: 1 / -1;
			order: -1;
			font-size: 22px;
			padding: 25px;
			position: relative;
			border-radius: 18px 18px 0 0;
		}

		/* ===== OVERLAY ARRI√àRE-PLAN ===== */
		.modal-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.6);
			backdrop-filter: blur(8px);
			z-index: 999;
			opacity: 0;
			visibility: hidden;
			transition: all 0.3s ease;
		}

		.modal-overlay.active {
			opacity: 1;
			visibility: visible;
		}

		/* ===== ANIMATION DIRECTE AU CENTRE ===== */
		@keyframes modalAppear {
			0% {
				opacity: 0;
				transform: translate(-50%, -50%) scale(0.8);
			}
			100% {
				opacity: 1;
				transform: translate(-50%, -50%) scale(1);
			}
		}

		.category.closing {
			animation: modalDisappear 0.3s ease-in forwards;
		}

		@keyframes modalDisappear {
			0% {
				opacity: 1;
				transform: translate(-50%, -50%) scale(1);
			}
			100% {
				opacity: 0;
				transform: translate(-50%, -50%) scale(0.8);
			}
		}

		/* ===== FORMATIONS DANS LA MODAL SANS SCROLL ===== */
		.formations-preview {
			display: none;
			padding: 30px;
			background: rgba(255, 255, 255, 0.95);
			backdrop-filter: blur(15px);
			/* PAS de scroll - hauteur auto */
			overflow: visible;
			position: relative;
			z-index: 10;
		}

		.category.expanded .formations-preview {
			display: block;
		}

		.formations-preview h4 {
			color: var(--primary-gradient);
			margin-bottom: 20px;
			font-size: 18px;
			font-weight: 600;
		}

		.formation-item {
			background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
			padding: 15px 18px;
			margin-bottom: 10px;
			border-radius: 12px;
			color: #0077b6;
			font-weight: 500;
			cursor: pointer;
			transition: var(--transition);
			border: 1px solid transparent;
			position: relative;
			overflow: hidden;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.formation-item::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
			transition: left 0.3s;
		}

		.formation-item:hover {
			transform: translateX(5px);
			background: linear-gradient(135deg, #b2ebf2, #80deea);
			border-color: #0077b6;
			box-shadow: 0 4px 15px rgba(0, 119, 182, 0.3);
		}

		.formation-item:hover::before {
			left: 100%;
		}

		.formation-name {
			font-size: 15px;
			line-height: 1.4;
			flex-grow: 1;
		}

		.formation-arrow {
			font-size: 18px;
			color: #0b3f89;
			font-weight: bold;
			margin-left: 10px;
			transition: transform 0.3s ease;
		}

		.formation-item:hover .formation-arrow {
			transform: translateX(5px);
		}

		/* ===== BOUTON "VOIR PLUS" ===== */
		.voir-plus-button {
			margin-top: 20px;
			padding: 12px 24px;
			background: var(--primary-gradient);
			color: white;
			border: none;
			border-radius: 25px;
			font-weight: 600;
			cursor: pointer;
			transition: var(--transition);
			text-decoration: none;
			display: inline-block;
			position: relative;
			overflow: hidden;
		}

		.voir-plus-button::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: rgba(255, 255, 255, 0.2);
			transition: left 0.3s;
		}

		.voir-plus-button:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 25px rgba(11, 63, 137, 0.4);
		}

		.voir-plus-button:hover::before {
			left: 100%;
		}

		/* ===== BOUTON FERMER MODAL ===== */
		.close-button {
			position: absolute;
			top: 15px;
			right: 15px;
			background: rgba(255, 255, 255, 0.95);
			border: none;
			border-radius: 50%;
			width: 40px;
			height: 40px;
			display: none;
			align-items: center;
  justify-content: center;
			cursor: pointer;
			font-size: 20px;
			color: #0b3f89;
			transition: var(--transition);
			z-index: 1001;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
			font-weight: bold;
		}

		.category.expanded .close-button {
			display: flex;
		}

		.close-button:hover {
			background: white;
			transform: scale(1.15);
			box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
		}

		/* ===== RESPONSIVE MODAL ===== */
		@media (max-width: 768px) {
			.categories {
				grid-template-columns: 1fr;
				gap: 20px;
			}

			.category.expanded {
				width: 95vw !important;
				max-height: 95vh !important;
			}

			.category.expanded .category-card {
				grid-template-columns: 1fr;
				min-height: auto;
			}

			.category.expanded .category-image {
				height: 250px;
				min-height: 250px;
				border-radius: 18px 18px 0 0;
			}

			.formations-preview {
  padding: 20px;
			}

			.close-button {
				top: 10px;
				right: 10px;
				width: 35px;
				height: 35px;
				font-size: 18px;
			}
		}

.formation {
			background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
			padding: 16px 20px;
			margin-bottom: 12px;
			border-radius: 12px;
  color: #0077b6;
  font-weight: 500;
  cursor: pointer;
			transition: var(--transition);
			border: 1px solid transparent;
			position: relative;
			overflow: hidden;
		}

		.formation::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
			transition: left 0.3s;
}

.formation:hover {
			transform: translateX(5px);
			background: linear-gradient(135deg, #b2ebf2, #80deea);
			border-color: #0077b6;
			box-shadow: 0 4px 15px rgba(0, 119, 182, 0.3);
		}

		.formation:hover::before {
			left: 100%;
		}

		/* ===== CPF SECTION MODERNIS√âE (COULEURS BLEUES/BLANCHES) ===== */
		.cpf-section {
			background: linear-gradient(135deg, #0b3f89, #1e5cb8);
			padding: 80px 20px;
			color: white;
			position: relative;
  overflow: hidden;
		}

		.cpf-section::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
			animation: twinkle 3s ease-in-out infinite alternate;
		}

		@keyframes twinkle {
			0% { opacity: 0.3; }
			100% { opacity: 0.8; }
		}

		.wp-block-formation-financable-cpf {
			position: relative;
			z-index: 2;
			max-width: 1200px;
			margin: 0 auto;
			display: grid;
			grid-template-columns: 1fr 2fr;
			gap: 60px;
			align-items: center;
		}

		.wp-image-cpf_lady {
			width: 100%;
			height: auto;
			border-radius: var(--border-radius);
			filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.3));
			transition: var(--transition);
		}

		.wp-image-cpf_lady:hover {
			transform: scale(1.05);
			filter: drop-shadow(0 25px 50px rgba(0, 0, 0, 0.4));
}

		.cpf-buttons {
  display: flex;
			gap: 20px;
			margin-top: 30px;
			flex-wrap: wrap;
		}

		.wp-block-button__link {
			padding: 15px 30px;
			border-radius: 50px;
			font-weight: 600;
			text-decoration: none;
			transition: var(--transition);
			border: 2px solid transparent;
			position: relative;
			overflow: hidden;
		}

		.wp-block-button__link:first-child {
			background: rgba(255, 255, 255, 0.2);
			color: white;
			border-color: rgba(255, 255, 255, 0.3);
		}

		.wp-block-button__link:last-child {
			background: transparent;
			color: white;
			border-color: rgba(255, 255, 255, 0.3);
			backdrop-filter: blur(10px);
}

		.wp-block-button__link:hover {
			transform: translateY(-2px);
			box-shadow: var(--shadow-heavy);
		}

		/* ===== BLOG SECTION MODERNIS√âE ===== */
		.blog-sectionactualite {
			background: linear-gradient(180deg, #f1f5f9 0%, #e2e8f0 100%);
			padding: 80px 20px;
		}

		.blog-heading {
			text-align: center;
			font-size: clamp(2rem, 4vw, 3rem);
			color: #1a202c;
			margin-bottom: 50px;
			position: relative;
		}

		.blog-heading::after {
			content: '';
			position: absolute;
			bottom: -10px;
			left: 50%;
			transform: translateX(-50%);
			width: 80px;
			height: 4px;
			background: var(--primary-gradient);
			border-radius: 2px;
}

		.blog-container {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
			gap: 30px;
			max-width: 1200px;
			margin: 0 auto;
		}

		.blog-postactualite {
			background: rgba(255, 255, 255, 0.8);
			backdrop-filter: blur(15px);
			border-radius: var(--border-radius);
  overflow: hidden;
			transition: var(--transition);
			border: 1px solid rgba(255, 255, 255, 0.3);
			box-shadow: var(--shadow-light);
}

		.blog-postactualite:hover {
			transform: translateY(-8px);
			box-shadow: var(--shadow-heavy);
			background: rgba(255, 255, 255, 0.95);
}

		.card-img-top {
			width: 100%;
			height: 220px;
  object-fit: cover;
			transition: var(--transition);
}

		.blog-postactualite:hover .card-img-top {
			transform: scale(1.1);
		}

		.blog-post-content {
			padding: 25px;
		}

		.read-more {
			display: inline-block;
			margin-top: 15px;
			padding: 8px 20px;
			background: var(--primary-gradient);
  color: white;
			text-decoration: none;
			border-radius: 25px;
			font-weight: 500;
			transition: var(--transition);
		}

		.read-more:hover {
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(11, 63, 137, 0.4);
}

		/* ===== VIDEO SECTION MODERNIS√âE (COULEURS COH√âRENTES AVEC LE SITE) ===== */
		.video-section {
			background: linear-gradient(135deg, #0b3f89 0%, #1e5cb8 100%);
			padding: 80px 20px;
			color: white;
			position: relative;
			overflow: hidden;
}

		.video-section::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="25" cy="75" r="1" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
			animation: twinkle 4s ease-in-out infinite alternate;
}

		.wp-block-coaching-personnalise {
			max-width: 1200px;
			margin: 0 auto;
			display: grid;
			grid-template-columns: 1fr 1.5fr;
			gap: 60px;
			align-items: center;
		}

		.wp-block-videos {
			position: relative;
			padding: 56.25% 0 0 0;
			border-radius: var(--border-radius);
  overflow: hidden;
			box-shadow: var(--shadow-heavy);
		}

		.wp-block-videos video {
			position: absolute;
			top: 0;
			left: 0;
				width: 100%;
			height: 100%;
			border-radius: var(--border-radius);
			transition: var(--transition);
		}

		.wp-block-videos:hover video {
			transform: scale(1.02);
}

				/* ===== CONTACT SECTION MODERNE AVEC FOND BLANC ===== */
		.contact-section {
			background: #ffffff;
			padding: 100px 20px;
			position: relative;
			overflow: hidden;
		}

		.contact-section::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><pattern id="contactGrid" width="50" height="50" patternUnits="userSpaceOnUse"><path d="M 50 0 L 0 0 0 50" fill="none" stroke="rgba(11,63,137,0.05)" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23contactGrid)"/></svg>');
			animation: float 15s ease-in-out infinite;
  }

		.contact-content {
			max-width: 1200px;
			margin: 0 auto;
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 80px;
			align-items: center;
			position: relative;
			z-index: 2;
		}

		.contact-info {
			color: #0b3f89;
		}

		.contact-info h2 {
			font-size: clamp(2.5rem, 5vw, 4rem);
			font-weight: 700;
			margin-bottom: 30px;
			line-height: 1.2;
			color: #0b3f89;
		}

		.contact-info p {
			font-size: 1.3rem;
			line-height: 1.6;
			margin-bottom: 40px;
			color: #64748b;
		}

		.contact-features {
			display: grid;
			grid-template-columns: repeat(2, 1fr);
			gap: 30px;
			margin-top: 50px;
		}

		.contact-feature {
			display: flex;
			align-items: center;
			gap: 15px;
				padding: 20px;
			background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
			border-radius: 15px;
			border: 1px solid #e2e8f0;
			transition: var(--transition);
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
		}

		.contact-feature:hover {
			transform: translateY(-5px);
			background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
			box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
		}

		.contact-feature-icon {
			width: 24px;
			height: 24px;
			background: #0b3f89;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 14px;
			color: white;
			font-weight: bold;
		}

		.contact-feature-text {
			color: #0b3f89;
			font-weight: 500;
		}

		.contact-card {
			background: rgba(11, 63, 137, 0.03);
			border: 2px solid #e2e8f0;
			border-radius: var(--border-radius);
			padding: 50px 40px;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
			position: relative;
			overflow: hidden;
		}

		.contact-card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 4px;
			background: var(--primary-gradient);
			}

		.contact-card h3 {
			color: #0b3f89;
			font-size: 1.8rem;
			font-weight: 600;
			margin-bottom: 20px;
				text-align: center;
			}

		.contact-card p {
			color: #64748b;
			text-align: center;
			margin-bottom: 30px;
			font-size: 1.1rem;
		}

		.contact-methods {
			display: grid;
			gap: 20px;
		}

		.contact-method {
			display: flex;
			align-items: center;
			gap: 15px;
			padding: 20px;
			background: #ffffff;
			border-radius: 12px;
			transition: var(--transition);
			border: 2px solid #e2e8f0;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
			text-decoration: none;
			color: inherit;
		}

		.contact-method:hover {
			background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
			border-color: #0b3f89;
			transform: translateX(5px);
			box-shadow: 0 8px 25px rgba(11, 63, 137, 0.15);
			text-decoration: none;
			color: inherit;
		}

		.contact-method-icon {
			width: 40px;
			height: 40px;
			background: var(--primary-gradient);
			border-radius: 50%;
  display: flex;
			align-items: center;
			justify-content: center;
			color: white;
			font-size: 18px;
		}

		.contact-method-content h4 {
			color: #0b3f89;
			font-weight: 600;
			margin-bottom: 5px;
		}

		.contact-method-content p {
			color: #64748b;
			font-size: 0.9rem;
			margin: 0;
		}

		/* Style sp√©cial pour le bouton t√©l√©phone */
		.contact-method.phone-method {
			cursor: pointer;
		}

		.contact-method.phone-method .contact-method-content h4 {
			display: flex;
			align-items: center;
			gap: 8px;
		}

		.phone-number {
			font-weight: 600;
			color: #0b3f89;
		}

		/* Badge mobile uniquement */
		.mobile-only {
			display: none;
			background: #22c55e;
			color: white;
			font-size: 11px;
			padding: 2px 6px;
			border-radius: 4px;
			font-weight: 500;
		}

		@media (max-width: 768px) {
			.mobile-only {
				display: inline-block;
			}
		}

		/* Animations pour la notification t√©l√©phone */
		@keyframes phoneNotificationAppear {
			0% {
				opacity: 0;
				transform: translate(-50%, -50%) scale(0.8);
			}
			100% {
				opacity: 1;
				transform: translate(-50%, -50%) scale(1);
			}
		}

		@keyframes phoneNotificationDisappear {
			0% {
				opacity: 1;
				transform: translate(-50%, -50%) scale(1);
			}
			100% {
				opacity: 0;
				transform: translate(-50%, -50%) scale(0.8);
			}
		}

		.btn-primary {
			background: var(--primary-gradient);
			color: white;
			padding: 18px 40px;
			border: none;
			border-radius: 50px;
			text-decoration: none;
			display: inline-block;
			transition: all 0.3s ease;
			font-weight: 600;
			font-size: 1.1rem;
			position: relative;
			overflow: hidden;
			box-shadow: 0 4px 15px rgba(11, 63, 137, 0.2);
		}

		.btn-primary::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
			transition: left 0.4s ease;
		}

		.btn-primary:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 25px rgba(11, 63, 137, 0.3);
			background: linear-gradient(135deg, #004080, #0056b3);
		}

		.btn-primary:hover::before {
			left: 100%;
		}

		.btn-primary:active {
			transform: translateY(0);
			transition: all 0.1s ease;
		}

		/* ===== RESPONSIVE DESIGN ===== */
@media (max-width: 768px) {
			.categories {
				grid-template-columns: 1fr;
				gap: 20px;
  }

			.wp-block-formation-financable-cpf {
				grid-template-columns: 1fr;
				gap: 40px;
				text-align: center;
  }

			.wp-block-coaching-personnalise {
				grid-template-columns: 1fr;
				gap: 40px;
  }

			.cpf-buttons {
				justify-content: center;
  }

			.titlePage {
    font-size: 2.5rem;
}

			/* Contact section responsive */
			.contact-section {
				padding: 60px 20px;
			}

			.contact-content {
				grid-template-columns: 1fr;
				gap: 50px;
			}

			.contact-info h2 {
    font-size: 2.5rem;
  }

			.contact-info p {
    font-size: 1.1rem;
  }

			.contact-features {
				grid-template-columns: 1fr;
				gap: 15px;
				margin-top: 30px;
			}

			.contact-card {
				padding: 30px 20px;
			}

			/* Optimisation mobile pour le bouton t√©l√©phone */
			.contact-method.phone-method {
				background: linear-gradient(135deg, #e8f5e8 0%, #f0f9ff 100%);
				border-color: #22c55e;
			}

			.contact-method.phone-method:hover {
				background: linear-gradient(135deg, #dcfce7 0%, #e0f2fe 100%);
				transform: scale(1.02);
			}

			.phone-number {
				font-size: 1.1rem;
				color: #0b3f89;
			}
		}

		/* ===== ANIMATIONS SCROLL ===== */
		@keyframes fadeInUp {
			from {
				opacity: 0;
				transform: translateY(30px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
  }
}

		@keyframes fadeInLeft {
			from {
				opacity: 0;
				transform: translateX(-30px);
			}
			to {
				opacity: 1;
				transform: translateX(0);
        }
    }

		@keyframes fadeInRight {
			from {
				opacity: 0;
				transform: translateX(30px);
			}
			to {
				opacity: 1;
				transform: translateX(0);
			}
		}

		/* ===== PARTICLE EFFECT ===== */
		.particles {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			overflow: hidden;
			z-index: 1;
        }
        
		.particle {
			position: absolute;
			width: 4px;
			height: 4px;
			background: rgba(255, 255, 255, 0.5);
			border-radius: 50%;
			animation: float-particle 6s infinite ease-in-out;
		}

		@keyframes float-particle {
			0%, 100% {
				transform: translateY(0px) translateX(0px);
				opacity: 0;
			}
			50% {
				opacity: 1;
        }
    }
	</style>
{% endblock %}

{% block body %}
	<!-- Hero Section -->
	<div class="hero-section">
		<div class="particles" id="particles"></div>
		<h1 class="titlePage" data-aos="fade-down" data-aos-duration="1000">Formez-vous facilement √† votre futur m√©tier</h1>
		<button id="cta-rdv" class="cta-popup" data-aos="fade-up" data-aos-delay="200">üìû R√©server un rendez-vous gratuit</button>
	</div>

		<!-- Categories Section - Syst√®me modal en premier plan -->
	<div class="categories-section" id="formations">
		<div class="container">
			<h2 class="section-title" data-aos="fade-up">Nos formations par th√©matique</h2>
			<p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Cliquez sur un th√®me pour d√©couvrir les formations disponibles</p>

			<!-- Overlay pour modal -->
			<div class="modal-overlay" id="modal-overlay"></div>

			<div class="categories" id="categories-grid">
				{% for category in category %}
					<div class="category" data-category-id="{{ category.id }}" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
			<div class="category-card">
							<button class="close-button">√ó</button>
							<img 
								src="{{ asset('img/' ~ categoryImages[category.id] ?? 'default-image.jpg') }}" 
								alt="{{ category.name }}"
								class="category-image"
							>
				<div class="category-title">{{ category.name }}</div>
							
							<div class="formations-preview">
								<h4>Formations disponibles</h4>
								<div class="formations-list">
									{% set categoryFormations = [] %}
									{% for formation in formations %}
										{% if formation.category.id == category.id %}
											{% set categoryFormations = categoryFormations|merge([formation]) %}
										{% endif %}
									{% endfor %}
									
									{% set maxFormations = 4 %}
									{% for formation in categoryFormations|slice(0, maxFormations) %}
										<div class="formation-item" data-formation-id="{{ formation.id }}" onclick="window.location.href='{{ path('app_formation_show', { 'id': formation.id }) }}'">
											<div class="formation-name">{{ formation.nameFormation }}</div>
											<div class="formation-arrow">‚Üí</div>
					</div>
				{% endfor %}
									
									{% if categoryFormations|length > maxFormations %}
										<a href="{{ path('app_home') }}?category_id={{ category.id }}" class="voir-plus-button">
											Voir toutes les formations ({{ categoryFormations|length }} au total)
										</a>
									{% endif %}
								</div>
							</div>
			</div>
		</div>
	{% endfor %}
			</div>
		</div>
</div>

	<!-- CPF Section -->
	<div class="cpf-section">
		<div class="wp-block-formation-financable-cpf" data-aos="fade-up">
			<div class="wp-block-column_cpf_lady" data-aos="fade-right">
				<img src="../img/CPF.png" class="wp-image-cpf_lady" alt="formation_financable_cpf">
			</div>
			<div class="wp-block-formation-financable-cpf-texte" data-aos="fade-left">
				<h2 class="wp-block-heading has-text-color" style="color:#ffffff;font-size:clamp(2rem, 4vw, 4.1rem);margin-bottom:20px;">
					FORMATIONS √† distance<br>
					<span style="color: #d71a22">100% FINAN√áABLES</span> VIA VOTRE CPF
				</h2>
						<div>
					<p class="has-text-color" style="color:#e2e8f0;margin-bottom:20px;">
						L'INFPF permet √† toute personne, salari√©e ou demandeur d'emploi, de suivre la formation de leur choix. √Ä l'Institut national de la formation professionnelle fran√ßaise, les formations √† distance propos√©es sont diversifi√©es et adapt√©es aux besoins actuels du march√© du travail.
							</p>
					<p class="has-text-color" style="color:#e2e8f0;">
								Parmi nos formations √©ligibles au CPF, nous offrons des cours dans des domaines cl√©s tels que : la Finance, l'Administration, l'Informatique, le Design, le Management, la Vente, le Marketing, les Langues et bien plus encore.
							</p>
						</div>
				<div class="cpf-buttons">
					<a class="wp-block-button__link" href="{{ path('redirectToFormationsEligiblesCPF')}}">Utiliser mon CPF</a>
					<a class="wp-block-button__link calendly-trigger" href="#">üí¨ Conseil gratuit</a>
					</div>
					</div>
		</div>
	</div>

	<!-- Blog Section -->
	<div class="blog-sectionactualite">
		<h2 class="blog-heading" data-aos="fade-up">Actualit√©s de l'INFPF</h2>
<div class="blog-container">
	{% for blog in blog %}
				<div class="blog-postactualite" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
			{% if blog.image %}
				<img src="/uploads/images/{{ blog.image }}" class="card-img-top" alt="Image description">
			{% endif %}
			<div class="blog-post-content">
				<h3>{{ blog.titleOne }}</h3>
				<p>{{ blog.contentOne|slice(0, 150) ~ '...' }}</p>
				<a href="{{ path('blog_show', {'id': blog.id}) }}" class="read-more">Voir la suite</a>
			</div>
		</div>
	{% endfor %}
</div>	
		<div style="text-align: center; margin-top: 40px;">
			<button id="cta-rdv-2" class="cta-popup-blue" data-aos="fade-up">üìû R√©server un rendez-vous gratuit</button>
</div>
	</div>

	<!-- Video Section -->
	<div class="video-section">
		<div class="wp-block-coaching-personnalise" data-aos="fade-up">
			<div class="wp-block-videos" data-aos="fade-right">
				<video controls autoplay loop>
        <source src="../img/video-infpf.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
			<div class="wp-block-coaching-personnalise-content" data-aos="fade-left">
				<h2 class="wp-block-heading wp-block-coaching-personnalise-titre" style="color:#ffffff;font-style:normal;font-weight:300;font-size:clamp(1.8rem, 3vw, 2.5rem);">
					Votre d√©veloppement est notre
					<span style="color: #ffffff">
						<strong style="color: #e3f2fd;">mission</strong>
				</span>
			</h2>
				<p class="wp-block-coaching-personnalise-ss-titre" style="color:#e2e8f0;margin-bottom:20px;">√Ä l'INFPF, nous nous engageons √† vous pr√©parer aux d√©fis de demain.</p>
				<p class="r" style="color:#e2e8f0;margin-bottom:30px;">
				Nos programmes sont con√ßus pour vous √©quiper avec les comp√©tences n√©cessaires dans des domaines cl√©s, r√©pondant aux exigences des m√©tiers du nouveau monde. Nous vous offrons une formation de pointe, centr√©e sur l'innovation et adapt√©e aux √©volutions constantes du march√© professionnel. Rejoignez-nous pour transformer votre avenir et r√©aliser vos ambitions.
			</p>
				<div class="wp-block-buttons">
					<div class="wp-block-button">
						<a class="wp-block-button__link" href="{{ path('redirectToPourquoiChoisirLeInfpf')}}">Pourquoi choisir l'INFPF ?</a>
				</div>
			</div>
				</div>
			</div>
		</div>

		<!-- Contact Section Moderne et Coh√©rente -->
	<section class="contact-section">
		<div class="contact-content">
			<div class="contact-info" data-aos="fade-right" data-aos-duration="1000">
				<h2>Pr√™t √† transformer votre avenir ?</h2>
				<p>Rejoignez des milliers d'apprenants qui ont fait confiance √† l'INFPF pour d√©velopper leurs comp√©tences et acc√©l√©rer leur carri√®re.</p>
				<a href="{{ path('app_contact') }}" class="btn btn-primary">D√©marrer mon projet</a>
				
				<div class="contact-features">
					<div class="contact-feature" data-aos="fade-up" data-aos-delay="200">
						<div class="contact-feature-icon">‚úì</div>
						<div class="contact-feature-text">R√©ponse sous 24h</div>
					</div>
					<div class="contact-feature" data-aos="fade-up" data-aos-delay="300">
						<div class="contact-feature-icon">üìã</div>
						<div class="contact-feature-text">Bilan personnalis√©</div>
					</div>
					<div class="contact-feature" data-aos="fade-up" data-aos-delay="400">
						<div class="contact-feature-icon">üéØ</div>
						<div class="contact-feature-text">Conseil expert</div>
					</div>
					<div class="contact-feature" data-aos="fade-up" data-aos-delay="500">
						<div class="contact-feature-icon">üíº</div>
						<div class="contact-feature-text">Suivi carri√®re</div>
					</div>
				</div>
	</div>

			<div class="contact-card" data-aos="fade-left" data-aos-duration="1000">
				<h3>Nos conseillers √† votre √©coute</h3>
				<p>Choisissez le moyen de contact qui vous convient le mieux</p>
				
				<div class="contact-methods">
					<a href="{{ path('app_contact') }}" class="contact-method" data-aos="fade-up" data-aos-delay="100">
						<div class="contact-method-icon">üìß</div>
						<div class="contact-method-content">
							<h4>Formulaire de contact</h4>
							<p>D√©crivez votre projet en d√©tail</p>
						</div>
					</a>
					
					<div class="contact-method phone-method" data-aos="fade-up" data-aos-delay="200" id="phone-contact">
						<div class="contact-method-icon">üìû</div>
						<div class="contact-method-content">
							<h4>Rendez-vous t√©l√©phonique <span class="mobile-only">APPELER</span></h4>
							<p>√âchange direct avec un conseiller <br></p>
						</div>
					</div>
					
					<div class="contact-method calendly-trigger" data-aos="fade-up" data-aos-delay="300" style="cursor: pointer;">
						<div class="contact-method-icon">üí¨</div>
						<div class="contact-method-content">
							<h4>Conseil personnalis√©</h4>
							<p>Bilan de comp√©tences gratuit</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	{% include 'footer.html.twig' %}

{% block javascripts %}
	<!-- AOS Animation Library -->
	<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script defer src="https://assets.calendly.com/assets/external/widget.js"></script>
  <script>
		// Initialize AOS
		AOS.init({
			duration: 800,
			easing: 'ease-in-out',
			once: true,
			offset: 50
		});

		// Particle effect
		function createParticle() {
			const particle = document.createElement('div');
			particle.className = 'particle';
			particle.style.left = Math.random() * 100 + '%';
			particle.style.animationDelay = Math.random() * 6 + 's';
			particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
			document.getElementById('particles').appendChild(particle);

			setTimeout(() => {
				particle.remove();
			}, 6000);
		}

		// Create particles periodically
		setInterval(createParticle, 300);

				// Syst√®me modal en premier plan avec limitation de formations
    document.addEventListener('DOMContentLoaded', () => {
			const modalOverlay = document.getElementById('modal-overlay');
			
			// Fonction pour fermer la modal avec animation
			function closeModal(category) {
				category.classList.add('closing');
				modalOverlay.classList.remove('active');
				document.body.style.overflow = ''; // R√©activer le scroll
				
				setTimeout(() => {
					category.classList.remove('expanded', 'closing');
				}, 300);
			}

			// Clic sur les cartes
      document.querySelectorAll('.category-card').forEach(card => {
				card.addEventListener('click', (e) => {
					// Emp√™cher le clic si c'est sur le bouton fermer ou une formation
					if (e.target.classList.contains('close-button') || 
						  e.target.closest('.formation-item') ||
						  e.target.closest('.formations-preview')) {
						return;
					}

          const category = card.closest('.category');
					const isExpanded = category.classList.contains('expanded');
					
					// Fermer toutes les autres cat√©gories
          document.querySelectorAll('.category').forEach(c => {
						if (c !== category && c.classList.contains('expanded')) {
							closeModal(c);
						}
					});
					
					// Toggle la cat√©gorie actuelle
					if (isExpanded) {
						closeModal(category);
					} else {
						// Ouvrir la modal directement au centre
						category.classList.add('expanded');
						modalOverlay.classList.add('active');
						document.body.style.overflow = 'hidden'; // Bloquer le scroll
						
						// Animation des formations avec d√©lai
						setTimeout(() => {
							const formationItems = category.querySelectorAll('.formation-item');
							formationItems.forEach((item, index) => {
								item.style.opacity = '0';
								item.style.transform = 'translateX(-20px)';
								setTimeout(() => {
									item.style.transition = 'all 0.3s ease';
									item.style.opacity = '1';
									item.style.transform = 'translateX(0)';
								}, index * 80);
							});
						}, 200);
					}
        });
      });

			// Fermeture par clic sur le bouton fermer
			document.addEventListener('click', (e) => {
				if (e.target.classList.contains('close-button')) {
					const category = e.target.closest('.category');
					closeModal(category);
				}
			});

			// Fermeture par clic sur l'overlay
			modalOverlay.addEventListener('click', () => {
				const expandedCategory = document.querySelector('.category.expanded');
				if (expandedCategory) {
					closeModal(expandedCategory);
				}
			});

			// Fermer avec la touche √âchap
			document.addEventListener('keydown', (e) => {
				if (e.key === 'Escape') {
					const expandedCategory = document.querySelector('.category.expanded');
					if (expandedCategory) {
						closeModal(expandedCategory);
					}
				}
			});

			// Enhanced CTA buttons
			const buttons = document.querySelectorAll('#cta-rdv, #cta-rdv-2, .calendly-trigger');
			buttons.forEach(btn => {
				btn.addEventListener('click', function(e) {
          e.preventDefault();
					
					// Add click animation
					this.style.transform = 'scale(0.95)';
					setTimeout(() => {
						this.style.transform = '';
					}, 150);

					if (typeof Calendly !== 'undefined') {
						Calendly.initPopupWidget({ url: 'https://calendly.com/contact-infpf?locale=fr' });
					} else {
						console.error("Calendly non charg√©");
					}
          });
        });

			// Gestion du bouton t√©l√©phone adaptatif
			const phoneContact = document.getElementById('phone-contact');
			if (phoneContact) {
				phoneContact.addEventListener('click', function(e) {
					e.preventDefault();
					
					// D√©tection mobile/desktop
					const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;
					
					if (isMobile) {
						// Sur mobile : ouvrir l'application t√©l√©phone
						window.location.href = 'tel:0489050355';
					} else {
						// Sur desktop : afficher une notification avec le num√©ro
						showPhoneNotification('T√©l. 04 89 05 03 55');
					}
					
					// Animation de clic
					this.style.transform = 'scale(0.95)';
					setTimeout(() => {
						this.style.transform = '';
					}, 150);
				});
			}

			// Fonction pour afficher le num√©ro sur desktop
			function showPhoneNotification(phoneNumber) {
				// V√©rifier si une notification existe d√©j√†
				const existingNotification = document.querySelector('.phone-notification');
				if (existingNotification) {
					existingNotification.remove();
				}

				const notification = document.createElement('div');
				notification.className = 'phone-notification';
				notification.style.cssText = `
					position: fixed;
					top: 50%;
					left: 50%;
					transform: translate(-50%, -50%);
					background: linear-gradient(135deg, #0b3f89 0%, #1e5cb8 100%);
					color: white;
					padding: 30px 40px;
					border-radius: 16px;
					z-index: 10000;
					font-family: Arial, sans-serif;
					font-size: 18px;
					font-weight: 600;
					text-align: center;
					box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
					animation: phoneNotificationAppear 0.3s ease;
					backdrop-filter: blur(10px);
					border: 2px solid rgba(255, 255, 255, 0.2);
				`;

				notification.innerHTML = `
					<div style="margin-bottom: 15px; font-size: 24px;">üìû</div>
					<div style="margin-bottom: 10px;">Appelez-nous maintenant :</div>
					<div style="font-size: 24px; font-weight: 700; margin-bottom: 15px; letter-spacing: 1px;">${phoneNumber}</div>
					<div style="font-size: 14px; opacity: 0.9;">Nos conseillers sont disponibles</div>
					<button onclick="this.parentElement.remove()" style="
						background: rgba(255, 255, 255, 0.2);
						border: 1px solid rgba(255, 255, 255, 0.3);
						color: white;
						padding: 8px 16px;
						border-radius: 20px;
						margin-top: 15px;
						cursor: pointer;
						font-size: 12px;
						transition: all 0.3s ease;
					" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">Fermer</button>
				`;

				document.body.appendChild(notification);

				// Auto-fermeture apr√®s 5 secondes
				setTimeout(() => {
					if (notification.parentElement) {
						notification.style.animation = 'phoneNotificationDisappear 0.3s ease forwards';
						setTimeout(() => notification.remove(), 300);
					}
				}, 5000);

				// Fermeture au clic en dehors
				const closeOnClickOutside = (e) => {
					if (!notification.contains(e.target)) {
						notification.remove();
						document.removeEventListener('click', closeOnClickOutside);
					}
				};
				setTimeout(() => document.addEventListener('click', closeOnClickOutside), 100);
			}

			// Smooth scroll for internal links
			document.querySelectorAll('a[href^="#"]').forEach(anchor => {
				anchor.addEventListener('click', function (e) {
					e.preventDefault();
					const target = document.querySelector(this.getAttribute('href'));
					if (target) {
						target.scrollIntoView({
							behavior: 'smooth',
							block: 'start'
        });
      }
    });
			});

			// SUPPRESSION DE L'EFFET PARALLAX - Le titre reste fixe
			// (Code parallax retir√©)

			// Add intersection observer for advanced animations
			const observer = new IntersectionObserver((entries) => {
				entries.forEach(entry => {
					if (entry.isIntersecting) {
						entry.target.style.animationPlayState = 'running';
					}
				});
			});

			document.querySelectorAll('.category-card, .blog-postactualite').forEach(el => {
				observer.observe(el);
			});
		});
  </script>
{% endblock %}

{% endblock %}


